{%- extends 'SymfonianIndonesiaAdminBundle::layout.html.twig' -%}

{% block css %}
    <link rel="stylesheet" href="{{- asset('bundles/symfonianindonesiaadmin/css/bootstrap-toggle.min.css') -}}" />
{% endblock %}

{%- block breadcrumb -%}
    <li><a href="#" class="active">{{- page_title | upper -}}</a></li>
    <li><a href="#" class="active">{{- (action_method ~ ' ' ~ page_title) | upper -}}</a></li>
{%- endblock -%}

{%- block page_title -%}
    {{- page_title -}}
{%- endblock -%}

{%- block page_description -%}
    {{- page_description -}}
{%- endblock -%}

{%- block menu -%}
    {{- knp_menu_render(menu, { currentClass: 'active', 'allow_safe_labels': true }) -}}
{%- endblock -%}

{%- block content -%}
    {% spaceless %}
        <div class="col-md-12 col-lg-12 col-sm-12">
            <div class="box box-success box-solid">
                <div class="box-body with-border table-responsive padding-7">
                    {% set header = [] %}
                    {% for field in form.children %}
                        {% if field.vars.name is sameas('_token') %}
                            {% set header = header | merge([field]) %}
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
        </div>
    {% endspaceless %}
{%- endblock -%}

{%- block javascript -%}
    {% spaceless %}
        <script src="{{- asset('bundles/symfonianindonesiaadmin/js/bootstrap-toggle.min.js') -}}" type="text/javascript"></script>
        <script type="text/javascript">
            jQuery(document).ready(function () {
                jQuery('.sfid-toggle').bootstrapToggle();
                var url = window.location.href;
                getList(url.replace('new', 'list'));

                jQuery(document).on('click', '.sfid-pagination a.btn-success', function (e) {
                    e.preventDefault();

                    var url = jQuery(this).attr('href');
                    getList(url);
                });
            });

            function getList(url) {
                jQuery.ajax({
                    url: url + '?do',
                    type:'GET',
                    dataType: 'html'
                }).done (function (response) {
                    jQuery('.sfid-content').html(response);
                    jQuery('.sfid-toggle').bootstrapToggle();
                });
            };
        </script>
    {% endspaceless %}
{%- endblock -%}